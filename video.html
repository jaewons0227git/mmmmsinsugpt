<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>YouTube 검색 (nocookie)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body { font-family: Arial; background:#f2f2f2; padding:20px; text-align:center; }
.container { max-width:1000px; margin:auto; background:#fff; padding:25px; border-radius:12px; }
input { width:65%; padding:12px; font-size:16px; }
button { padding:12px 20px; font-size:16px; background:#c4302b; color:#fff; border:none; border-radius:6px; cursor:pointer; }
.results { margin-top:30px; display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:20px; }
.card { cursor:pointer; border-radius:10px; overflow:hidden; box-shadow:0 3px 10px rgba(0,0,0,.1); }
.card img { width:100%; height:130px; object-fit:cover; }
.title { padding:10px; font-size:14px; }
#playerBox { margin-top:40px; display:none; }
iframe { width:100%; max-width:800px; height:450px; border:none; border-radius:10px; }
</style>
</head>

<body>
<div class="container">
  <h1>YouTube 검색 (nocookie)</h1>

  <input id="q" placeholder="검색어 입력">
  <button onclick="search()">검색</button>

  <div id="results" class="results"></div>

  <div id="playerBox">
    <h2>재생</h2>
    <iframe id="player" allowfullscreen></iframe>
  </div>
</div>

<script>
const API_KEY = "AIzaSyDKgbPLHoPoSPAWSW3sGpqg_ZpnsK7Tz_c"; // 여기!
const API_URL = "https://www.googleapis.com/youtube/v3/search";

async function search() {
  const q = document.getElementById("q").value.trim();
  if (!q) return alert("검색어 입력");

  const results = document.getElementById("results");
  results.innerHTML = "검색 중...";

  try {
    const url =
      `${API_URL}?part=snippet&type=video&maxResults=20&q=${encodeURIComponent(q)}&key=${API_KEY}`;
    const res = await fetch(url);
    const data = await res.json();

    if (data.error) throw new Error(data.error.message);

    results.innerHTML = "";
    data.items.forEach(v => {
      const id = v.id.videoId;
      const thumb = v.snippet.thumbnails.medium.url;

      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `<img src="${thumb}"><div class="title">${v.snippet.title}</div>`;
      card.onclick = () => play(id);
      results.appendChild(card);
    });
  } catch (e) {
    alert("검색 실패: " + e.message);
    console.error(e);
  }
}

function play(id) {
  document.getElementById("player").src =
    `https://www.youtube-nocookie.com/embed/${id}?autoplay=1&rel=0`;
  document.getElementById("playerBox").style.display = "block";
  document.getElementById("playerBox").scrollIntoView({behavior:"smooth"});
}

document.getElementById("q").addEventListener("keydown", e => {
  if (e.key === "Enter") search();
});
</script>
</body>
</html>
